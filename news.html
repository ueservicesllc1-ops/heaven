<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HEAVEN | Noticias</title>
    <!-- Fonts -->
    <link
        href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Inter:wght@400;500;600&display=swap"
        rel="stylesheet">
    <!-- Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <link rel="stylesheet" href="styles.css">
    <style>
        .page-header {
            background-image: linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)), url('https://images.unsplash.com/photo-1511537632536-b7a57580e5b5?auto=format&fit=crop&q=80&w=1600');
            background-size: cover;
            background-position: center;
            padding: 8rem 2rem 4rem;
            text-align: center;
        }

        .news-card {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            overflow: hidden;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            display: flex;
            flex-direction: column;
        }

        .news-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
            border-color: var(--gold-primary);
        }

        .news-card img {
            width: 100%;
            height: 220px;
            object-fit: cover;
            transition: transform 0.3s ease;
        }

        .news-card:hover img {
            transform: scale(1.05);
        }

        .news-card .content {
            padding: 1.5rem;
            display: flex;
            flex-direction: column;
            flex-grow: 1;
        }

        .news-card .content p {
            flex-grow: 1;
        }
    </style>
    <script src="translations.js"></script>
</head>

<body>

    <!-- Top Bar -->
    <div class="top-bar">
        <div class="container">
            <div class="social-icons" id="top-social-icons">
                <!-- Loaded via JS -->
            </div>
        </div>
    </div>

    <!-- Header -->
    <header>
        <nav class="navbar">
            <div class="logo">
                <a href="/" style="text-decoration:none;"><span>HEAVEN</span></a>
            </div>

            <ul class="nav-links">
                <li><a href="/" data-i18n="nav.home">Home</a></li>
                <li><a href="/#products" data-i18n="nav.products">Products</a></li>
                <li><a href="/#services" data-i18n="nav.services">Services</a></li>
                <li><a href="about.html" data-i18n="nav.about">About Us</a></li>
                <li><a href="news.html" class="active" data-i18n="nav.news">News</a></li>
                <li><a href="contact.html" data-i18n="nav.contact">Contact</a></li>
            </ul>

            <div class="nav-icons">
                <a href="#"><i data-lucide="search"></i></a>
                <a href="/gestion/index.html"><i data-lucide="user"></i></a>
                <a href="#"><i data-lucide="shopping-bag"></i></a>
            </div>
        </nav>
    </header>

    <!-- Page Content -->
    <div class="page-header">
        <h1 data-i18n="news.header.title"
            style="font-family: 'Playfair Display', serif; font-size: 3.5rem; color: var(--gold-primary);">Noticias &
            Blog</h1>
        <p data-i18n="news.header.desc" style="color: #ddd; font-size: 1.2rem; max-width: 600px; margin: 1rem auto;">
            Descubre las últimas novedades del mundo del café.</p>
    </div>

    <section id="news-section" style="padding: 4rem 1rem; background-color: var(--bg-secondary);">
        <div class="container" style="max-width: 1200px; margin: 0 auto;">
            <div class="news-grid"
                style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem;">

                <!-- Article 1 -->
                <article class="news-card">
                    <div style="overflow: hidden;">
                        <img src="https://images.unsplash.com/photo-1497935586351-b67a49e012bf?auto=format&fit=crop&q=80&w=800"
                            alt="Coffee Beans">
                    </div>
                    <div class="content">
                        <span class="date" data-i18n="news.article1.date"
                            style="color: var(--gold-primary); font-size: 0.85rem; font-weight: 500;">ENERO 5,
                            2026</span>
                        <h3 data-i18n="news.article1.title"
                            style="color: white; margin: 0.8rem 0; font-family: 'Playfair Display', serif; font-size: 1.5rem;">
                            El Secreto del Café de Altura</h3>
                        <p data-i18n="news.article1.desc"
                            style="color: #bbb; line-height: 1.6; font-size: 0.95rem; margin-bottom: 1.5rem;">
                            ¿Sabías que la altitud afecta directamente el sabor de tu taza? Descubre por qué nuestros
                            granos cultivados en Loja, Ecuador, desarrollan notas más dulces y complejas gracias a la
                            maduración lenta.
                        </p>
                        <button
                            onclick="openNewsModal('news.article1', 'https://images.unsplash.com/photo-1497935586351-b67a49e012bf?auto=format&fit=crop&q=80&w=800')"
                            data-i18n="news.readmore"
                            style="background:none; border:none; cursor:pointer; color: var(--gold-primary); font-weight: bold; border-bottom: 1px solid var(--gold-primary); padding-bottom: 2px; align-self: flex-start;">Leer
                            Artículo Completo</button>
                    </div>
                </article>

                <!-- Article 2 -->
                <article class="news-card">
                    <div style="overflow: hidden;">
                        <img src="https://images.unsplash.com/photo-1541167760496-1628856ab772?auto=format&fit=crop&q=80&w=800"
                            alt="Latte Art">
                    </div>
                    <div class="content">
                        <span class="date" data-i18n="news.article2.date"
                            style="color: var(--gold-primary); font-size: 0.85rem; font-weight: 500;">DICIEMBRE 28,
                            2025</span>
                        <h3 data-i18n="news.article2.title"
                            style="color: white; margin: 0.8rem 0; font-family: 'Playfair Display', serif; font-size: 1.5rem;">
                            Arte Latte: Guía Básica</h3>
                        <p data-i18n="news.article2.desc"
                            style="color: #bbb; line-height: 1.6; font-size: 0.95rem; margin-bottom: 1.5rem;">
                            Impresiona a tus invitados con diseños básicos. Te enseñamos los trucos fundamentales de la
                            vaporización de leche y el vertido para crear tu primer corazón en el café.
                        </p>
                        <button
                            onclick="openNewsModal('news.article2', 'https://images.unsplash.com/photo-1541167760496-1628856ab772?auto=format&fit=crop&q=80&w=800')"
                            data-i18n="news.readmore"
                            style="background:none; border:none; cursor:pointer; color: var(--gold-primary); font-weight: bold; border-bottom: 1px solid var(--gold-primary); padding-bottom: 2px; align-self: flex-start;">Leer
                            Artículo Completo</button>
                    </div>
                </article>

                <!-- Article 3 -->
                <article class="news-card">
                    <div style="overflow: hidden;">
                        <img src="https://images.unsplash.com/photo-1498804103079-a6351b050096?auto=format&fit=crop&q=80&w=800"
                            alt="Coffee Health">
                    </div>
                    <div class="content">
                        <span class="date" data-i18n="news.article3.date"
                            style="color: var(--gold-primary); font-size: 0.85rem; font-weight: 500;">DICIEMBRE 15,
                            2025</span>
                        <h3 data-i18n="news.article3.title"
                            style="color: white; margin: 0.8rem 0; font-family: 'Playfair Display', serif; font-size: 1.5rem;">
                            Salud y Café</h3>
                        <p data-i18n="news.article3.desc"
                            style="color: #bbb; line-height: 1.6; font-size: 0.95rem; margin-bottom: 1.5rem;">
                            Más que energía: estudios recientes confirman que el consumo moderado de café aporta
                            antioxidantes esenciales y puede mejorar tu salud cardiovascular a largo plazo.
                        </p>
                        <button
                            onclick="openNewsModal('news.article3', 'https://images.unsplash.com/photo-1498804103079-a6351b050096?auto=format&fit=crop&q=80&w=800')"
                            data-i18n="news.readmore"
                            style="background:none; border:none; cursor:pointer; color: var(--gold-primary); font-weight: bold; border-bottom: 1px solid var(--gold-primary); padding-bottom: 2px; align-self: flex-start;">Leer
                            Artículo Completo</button>
                    </div>
                </article>

            </div>
        </div>
    </section>

    <!-- Article Modal -->
    <div id="articleModal" class="modal"
        style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.9); z-index:1000; align-items:center; justify-content:center; backdrop-filter:blur(5px);">
        <div class="modal-content"
            style="background:#1a1a1a; max-width:800px; width:90%; max-height:90vh; overflow-y:auto; padding:0; border-radius:8px; position:relative; border:1px solid var(--gold-primary); box-shadow: 0 0 20px rgba(0,0,0,0.5);">
            <button onclick="closeArticleModal()"
                style="position:absolute; top:10px; right:15px; background:rgba(0,0,0,0.5); border:none; color:white; font-size:2rem; cursor:pointer; width:40px; height:40px; border-radius:50%; display:flex; align-items:center; justify-content:center; transition:0.3s; z-index: 10;">&times;</button>
            <img id="modalImg" src="" style="width:100%; height:350px; object-fit:cover; display:block;">
            <div style="padding: 2rem;">
                <span id="modalDate"
                    style="color:var(--gold-primary); font-size:0.9rem; font-weight:bold; letter-spacing:1px;"></span>
                <h2 id="modalTitle"
                    style="color:white; font-family:'Playfair Display',serif; font-size:2.5rem; margin:0.5rem 0 1.5rem; line-height:1.2;">
                </h2>
                <div id="modalBody" style="color:#ddd; line-height:1.8; font-size:1.1rem;"></div>
            </div>
        </div>
    </div>

    <script>
        function openNewsModal(articleKey, bgImage) {
            // Function to get current translation
            const t = (key) => window.t ? window.t(key) : key;

            const title = t(articleKey + '.title');
            const date = t(articleKey + '.date');
            const content = t(articleKey + '.content');

            openArticle(title, date, bgImage, content);
        }

        function openArticle(title, date, bgImage, fullText) {
            document.getElementById('modalTitle').textContent = title;
            document.getElementById('modalDate').textContent = date;
            document.getElementById('modalImg').src = bgImage;

            // Convert newlines to paragraphs
            const formattedText = fullText.split('\n\n').map(p => `<p style='margin-bottom:1rem;'>${p}</p>`).join('');
            document.getElementById('modalBody').innerHTML = formattedText;

            document.getElementById('articleModal').style.display = 'flex';
            document.body.style.overflow = 'hidden'; // Prevent background scrolling
        }
        function closeArticleModal() {
            document.getElementById('articleModal').style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        // Close modal on click outside
        document.getElementById('articleModal').addEventListener('click', function (e) {
            if (e.target === this) closeArticleModal();
        });
    </script>

    <!-- Footer -->
    <footer id="contact">
        <div class="footer-content">
            <div class="footer-col">
                <div class="logo">
                    <span>HEAVEN</span>
                </div>
                <p data-i18n="footer.desc" style="margin-top: 1rem; color: #8a8a8a;">Bringing the finest coffee
                    experience to your daily life.</p>
            </div>
            <div class="footer-col">
                <h4 data-i18n="footer.quicklinks">Quick Links</h4>
                <ul>
                    <li><a href="/" data-i18n="nav.home">Home</a></li>
                    <li><a href="about.html" data-i18n="nav.about">About Us</a></li>
                    <li><a href="/#products" data-i18n="nav.products">Shop</a></li>
                    <li><a href="news.html" data-i18n="nav.news">News</a></li>
                    <li><a href="contact.html" data-i18n="nav.contact">Contact</a></li>
                </ul>
            </div>
            <div class="footer-col">
                <h4 data-i18n="footer.contact">Contact Us</h4>
                <ul id="footer-contact-info">
                    <li><i data-lucide="map-pin" style="width:14px; display:inline;"></i> Paterson, New Jersey</li>
                    <li><i data-lucide="phone" style="width:14px; display:inline;"></i> +1 551 301 4573</li>
                    <li><i data-lucide="mail" style="width:14px; display:inline;"></i> info@heavencoffeeus.com</li>
                </ul>
            </div>
            <div class="footer-col">
                <h4 data-i18n="footer.follow">Follow Us</h4>
                <div class="social-links" id="footer-social-links">
                    <!-- loaded via js -->
                </div>
            </div>
        </div>
        <div class="copyright">
            <p data-i18n="footer.rights">&copy; 2026 HEAVEN Coffee. All rights reserved. | Designed and Powered by
                Freedom Labs</p>
        </div>
    </footer>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, collection, getDocs, query } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyDcQw9fbueQ2MRoO5thpfN3N_Pk4yaYmYM",
            authDomain: "heaven-99e7b.firebaseapp.com",
            projectId: "heaven-99e7b",
            storageBucket: "heaven-99e7b.firebasestorage.app",
            messagingSenderId: "762982225526",
            appId: "1:762982225526:web:eb1426623d1227bca0f157",
            measurementId: "G-Y9PTN2NLS6"
        };
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        lucide.createIcons();

        // Load Global Config (Info & Social)
        async function loadGlobalConfig() {
            try {
                const q = query(collection(db, 'config'));
                const snapshot = await getDocs(q);

                let contactData = {
                    address: 'Paterson, New Jersey',
                    phone: '+1 551 301 4573',
                    email: 'info@heavencoffeeus.com'
                };
                let socialData = {};

                snapshot.forEach(doc => {
                    const data = doc.data();
                    if (data.type === 'contact_info') contactData = { ...contactData, ...data };
                    if (data.type === 'social_links') socialData = data;
                });

                // Update Contact Info (Footer)
                const footerContact = document.getElementById('footer-contact-info');
                if (footerContact) {
                    footerContact.innerHTML = `
                         <li><i data-lucide="map-pin" style="width:14px; display:inline;"></i> ${contactData.address}</li>
                         <li><i data-lucide="phone" style="width:14px; display:inline;"></i> ${contactData.phone}</li>
                         <li><i data-lucide="mail" style="width:14px; display:inline;"></i> ${contactData.email}</li>
                         ${contactData.hours ? `<li><i data-lucide="clock" style="width:14px; display:inline;"></i> ${contactData.hours}</li>` : ''}
                    `;
                }

                // Update Social Links (TopBar & Footer)
                const updateSocial = (containerId) => {
                    const container = document.getElementById(containerId);
                    if (!container) return;

                    let html = '';
                    if (socialData.facebook) html += `<a href="${socialData.facebook}" target="_blank"><i data-lucide="facebook"></i></a>`;
                    if (socialData.instagram) html += `<a href="${socialData.instagram}" target="_blank"><i data-lucide="instagram"></i></a>`;
                    if (socialData.twitter) html += `<a href="${socialData.twitter}" target="_blank"><i data-lucide="twitter"></i></a>`;
                    if (socialData.youtube) html += `<a href="${socialData.youtube}" target="_blank"><i data-lucide="youtube"></i></a>`;

                    if (html) {
                        container.innerHTML = html;
                    }
                    lucide.createIcons();
                };

                if (Object.keys(socialData).length > 0) {
                    updateSocial('top-social-icons');
                    updateSocial('footer-social-links');
                }

            } catch (error) {
                console.error("Error loading config:", error);
            }
        }

        // Simple Sticky Header
        window.addEventListener('scroll', () => {
            const header = document.querySelector('header');
            if (window.scrollY > 50) {
                header.style.backgroundColor = 'rgba(10, 10, 10, 0.95)';
            } else {
                header.style.backgroundColor = '#222222';
            }
        });

        loadGlobalConfig();
    </script>
</body>

</html>